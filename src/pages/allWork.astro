---
import BaseLayout from '../layouts/BaseLayout.astro';
import GithubList from '../components/GithubList.astro';
import Header from '../components/Header.astro';
import ProjectCard from '../components/WorkCard.astro';
---

<!-- import { Octokit } from 'octokit';

const octokit = new Octokit(); --><!-- const { data } = await octokit.request('GET /users/{username}/repos', {
  username: `permalik`,
  sort: `created`
}); -->
<BaseLayout>
  <Header header='Work' />
  <section>
    <GithubList />
    <a class='view-all' href='/' view-all>
      view all <span arrow-right>→</span></a
    >
  </section>
</BaseLayout>

<script>
  const viewAll = document.querySelector('[view-all]');
  const arrowRight = document.querySelector('[arrow-right]');

  viewAll.addEventListener('mouseover', () => {
    arrowRight.classList.add('viewAllAnimation');
  });
  viewAll.addEventListener('mouseout', () => {
    arrowRight.classList.remove('viewAllAnimation');
  });
</script>

<style>
  section {
    position: relative;

    padding: 2.5rem 0;

    & > .view-all {
      position: absolute;
      right: 0;
      bottom: 0;

      padding: 0.25rem 0.5rem;
      margin: 0;
      border: none;
      border-radius: 0.5rem;

      display: inline-block;

      background: transparent;
      color: var(--base-light);

      font-family: sans-serif;
      font-size: 1rem;
      font-weight: 500;
      text-align: center;
      text-decoration: none;

      transition: background 250ms ease-in-out, transform 150ms ease;

      cursor: pointer;

      -webkit-appearance: none;
      -moz-appearance: none;
    }

    & > .view-all:hover,
    .view-all:focus {
      background-color: rgba(255, 255, 255, 0.1);
      box-shadow: 0px 3px 5px 2px rgba(0, 0, 0, 0.25);
    }

    & > .view-all:focus {
      outline: 1px solid #fff;
      outline-offset: -4px;
    }

    & > .view-all:active {
      transform: scale(0.99);
    }

    .viewAllAnimation {
      position: relative;
      left: 0.2rem;
    }
  }
</style>

<!-- TODO: -->

<!-- <img src='/codepen.svg' alt='Codepen icon' /> -->
<!-- <nav>
            <img src='/code.svg' alt='Code icon' />
            <img src='/site.svg' alt='External link icon' />
          </nav> -->

<!-- Add tags to the dedicated github page -->
<!-- <!-- <ul>
          <li>
            <a href='/'> javascript</a>
          </li>
          <li>
            <a href='/'> css</a>
          </li>
          <li>
            <a href='/'> html</a>
          </li>
        </ul> -->

<!-- {
          data.map((repo) => (
            <ProjectCard
              name={repo.name}
              description={repo.description}
              html_url={repo.html_url}
              topics={repo.topics} />
            <li class='hover:bg-stone-700/10'>
              <a href={repo.html_url}>
                <p class='font-sans font-medium capitalize'>
                  {repo.name.split('-').join(' ')}
                  <span class='tracking-wide text-teal-300 uppercase'>
                    •{' '}
                    {repo.description
                      .split(':')
                      .map((k) => k)
                      .slice(0, -1)}
                  </span>
                </p>
                <p>
                  {repo.description
                    .split(`:`)
                    .map((e) => e)
                    .slice(1)}
                </p>
              </a>
              <ul class='flex space-x-2'>
                {repo.topics.map((topic) => (
                  <a href=`/projects/${topic}`>
                    <li class='tracking-wide text-teal-300/80 hover:text-teal-300'>
                      #{topic}
                    </li>
                  </a>
                ))}
              </ul>
            </li>
          ))
        } -->
